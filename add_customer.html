<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Add New Customer</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />
    <script src="bootstrap/js/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
      integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
      crossorigin="anonymous"
    />
    <link rel="shortcut icon" href="" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="css/sidenav.css" />
    <link rel="stylesheet" href="css/home.css" />
    <script src="js/validateForm.js"></script>
    <script src="js/restrict.js"></script>
  </head>
  <body>
    <!-- including side navigations -->
    <script type="text/javascript">
      var pid = "none";
      function showhide(id) {
        var elements = document.getElementById(id).childNodes;
        var menu = elements[3];
        var arrow = elements[1].childNodes[4].childNodes[1];
        if (menu.style.display == "block") {
          menu.style.display = "none";
          arrow.style.transform = "rotate(0deg)";
          elements[1].style.color = "#eeeeee";
        } else {
          menu.style.display = "block";
          arrow.style.transform = "rotate(270deg)";
          elements[1].style.color = "#ff5252";
        }
        if (pid == id) pid = "none";
        if (pid != "none") {
          elements = document.getElementById(pid).childNodes;
          menu = document.getElementById(pid).childNodes[3];
          arrow = elements[1].childNodes[4].childNodes[1];
          if (menu.style.display == "block") {
            menu.style.display = "none";
            arrow.style.transform = "rotate(0deg)";
            elements[1].style.color = "#eeeeee";
          }
        }
        pid = id;
      }
      function showOptions() {
        var flag = document.getElementById("options");
        if (flag.style.display == "block") {
          flag.style.display = "none";
          document.getElementById("mark").style.display = "none";
        } else {
          flag.style.display = "block";
          document.getElementById("mark").style.display = "block";
        }
      }
    </script>
    <div ng-app="customerApp" ng-controller="customerController">
      <div class="sidenav">
        <div class="card">
          <div class="card-body">
            <div class="logo">
              <img src="images/prof.jpg" class="profile" />
              <h1 class="logo-caption"><span class="tweak">A</span>dmin</h1>
            </div>
            <!-- logo class -->
            <!-- dashboard start -->
            <div class="main-menu-item">
              <a href="home.html"
                ><i class="fa fa-dashboard"></i><span>Dashboard</span></a
              >
            </div>
            <!-- dashboard end -->
            <!-- invoice strat -->
            <div id="first" class="main-menu-item" onclick="showhide(this.id);">
              <a href="#">
                <i class="fa fa-balance-scale"></i><span>Invoice</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu" style="display: none">
                <li class="treeview">
                  <a href="new_invoice.html">New Invoice</a>
                </li>
                <li class="treeview">
                  <a href="manage_invoice.html">Manage Invoice </a>
                </li>
              </ul>
            </div>
            <!-- invoice end -->
            <!-- customer end -->
            <div
              id="second"
              class="main-menu-item"
              onclick="showhide(this.id);"
            >
              <a href="#">
                <i class="fa fa-handshake"></i><span>Customer</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu" style="display: none">
                <li class="treeview">
                  <a href="add_customer.html">Add Customer</a>
                </li>
                <li class="treeview">
                  <a href="manage_customer.html">Manage Customer</a>
                </li>
              </ul>
            </div>
            <!-- customer end -->
            <!-- medicine strat -->
            <div id="third" class="main-menu-item" onclick="showhide(this.id);">
              <a href="#">
                <i class="fa fa-shopping-bag"></i><span>Medicine</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu" style="display: none">
                <li class="treeview">
                  <a href="add_medicine.html">Add Medicine</a>
                </li>
                <li class="treeview">
                  <a href="manage_medicine.html">Manage Medicine</a>
                </li>
                <li class="treeview">
                  <a href="manage_medicine_stock.html">Manage Medicine Stock</a>
                </li>
              </ul>
            </div>
            <!-- medicine end -->
            <!-- manufacturer start -->
            <div
              id="fourth"
              class="main-menu-item"
              onclick="showhide(this.id);"
            >
              <a href="#">
                <i class="fa fa-group"></i><span>Supplier</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu" style="display: none">
                <li class="treeview">
                  <a href="add_supplier.html">Add Supplier</a>
                </li>
                <li class="treeview">
                  <a href="manage_supplier.html">Manage Supplier</a>
                </li>
              </ul>
            </div>
            <!-- manufacturer end -->
            <!-- purchase start -->
            <div id="fifth" class="main-menu-item" onclick="showhide(this.id);">
              <a href="#">
                <i class="fa fa-bar-chart"></i><span>Purchase</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu" style="display: none">
                <li class="treeview">
                  <a href="add_purchase.html">Add Purchase</a>
                </li>
                <li class="treeview">
                  <a href="manage_purchase.html">Manage Purchase</a>
                </li>
              </ul>
            </div>
            <!-- purchase end -->
            <!-- report start -->
            <div id="sixth" class="main-menu-item" onclick="showhide(this.id);">
              <a href="#">
                <i class="fa fa-book"></i><span>Report</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu" style="display: none">
                <li class="treeview">
                  <a href="sales_report.html">Sales Report</a>
                </li>
                <li class="treeview">
                  <a href="purchase_report.html">Purchase Report</a>
                </li>
              </ul>
            </div>
            <!-- report end -->
            <!-- search start -->
            <div
              id="seventh"
              class="main-menu-item"
              onclick="showhide(this.id);"
            >
              <a href="#">
                <i class="fa fa-search"></i><span>Search</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu" style="display: none">
                <li class="treeview">
                  <a href="manage_invoice.html">Invoice</a>
                </li>
                <li class="treeview">
                  <a href="manage_customer.html">Customer</a>
                </li>
                <li class="treeview">
                  <a href="manage_medicine.html">Medicine</a>
                </li>
                <li class="treeview">
                  <a href="manage_supplier.html">Supplier</a>
                </li>
                <li class="treeview">
                  <a href="manage_purchase.html">Purchase</a>
                </li>
              </ul>
            </div>
            <!-- search end -->
          </div>
          <!-- card-body class -->
        </div>
        <!-- card -->
      </div>
      <div class="container-fluid">
        <div class="container">
          <!-- header section -->
          <section class="row content-header">
            <div class="header-title col-md-11">
              <p class="h4 pt-2">
                <i class="fa fa-handshake"></i>&emsp;Add Customer
              </p>
              &emsp;&emsp;&emsp;<small class="font-weight-bold h6"
                >Add New Customer</small
              >
            </div>
            <div class="col-md-1 user_options">
              <button class="col col-md-1 m-3" onclick="showOptions();">
                <i class="fa fa-gear"></i>
              </button>
              <div id="mark"><i class="fa fa-play fa-rotate-270"></i></div>
              <ul
                id="options"
                class="options list-unstyled"
                style="display: none"
              >
                <li>
                  <a href="my_profile.html"
                    ><i class="fa fa-user"></i><span>My Profile</span></a
                  >
                </li>
                <li>
                  <a href="change_password.html"
                    ><i class="fa fa-edit"></i><span>Change Password</span></a
                  >
                </li>
                <li>
                  <a href="logout.html"
                    ><i class="fa fa-key"></i><span>Logout</span></a
                  >
                </li>
              </ul>
            </div>
          </section>
          <hr style="border-top: 2px solid #ff5252" />
          <form ng-submit="submit()" name="customerForm">
            <div class="row">
              <div class="row col col-md-6">
                <!-- customer details content -->
                <!-- customer name control -->
                <div class="row col col-md-12">
                  <div class="col col-md-12 form-group">
                    <label class="font-weight-bold" for="customer_name"
                      >Customer Name :</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Name"
                      id="customer_name"
                      name="customer_name"
                      ng-model="customer_name"
                      required
                    />
                    <span ng-show = "customerForm.customer_name.$dirty && customerForm.customer_name.$invalid">
                        <code
                        class="text-danger small font-weight-bold float-right"
                        id="name_error"
                        ng-show="customerForm.customer_name.$error.required"
                        >Customer name is required</code>
                        <!-- <span ng-show="customerForm.customer_name.$error.required">Customer name is required</span> -->
                    </span>
                  </div>
                </div>
                <!-- customer contact number control -->
                <div class="row col col-md-12">
                  <div class="col col-md-12 form-group">
                    <label
                      class="font-weight-bold"
                      for="customer_contact_number"
                      >Contact Number :</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      placeholder="Contact Number"
                      id="customer_contact_number"
                      name="customer_contact_number"
                      ng-model="customer_contact_number"
                      required
                      ng-maxlength="10" ng-minlength="10"
                    />
                    <span ng-show = "customerForm.customer_contact_number.$dirty && customerForm.customer_contact_number.$invalid">
                    <code
                      class="text-danger small font-weight-bold float-right"
                      id="contact_number_error"
                      ng-show = "customerForm.customer_contact_number.$error.required"
                    >Contact Number is required</code>
                    <code
                      class="text-danger small font-weight-bold float-right"
                      id="contact_number_error"
                      ng-show = "customerForm.customer_contact_number.$error.minlength || customerForm.customer_contact_number.$error.maxlength"
                    >Must contain 10 digits</code>
                    </span>
                  </div>
                </div>
                <!-- customer address control -->
                <div class="row col col-md-12">
                  <div class="col col-md-12 form-group">
                    <label class="font-weight-bold" for="customer_address"
                      >Address :</label
                    >
                    <textarea
                      class="form-control"
                      placeholder="Address"
                      id="customer_address"
                      name="customer_address"
                      ng-model="customer_address"
                      required
                    ></textarea>
                    <span ng-show = "customerForm.customer_address.$dirty && customerForm.customer_address.$invalid">
                    <code
                      class="text-danger small font-weight-bold float-right"
                      id="address_error"
                      ng-show="customerForm.customer_address.$error.required"
                    >Address is required</code>
                    </span>
                  </div>
                </div>
                <!-- customes's doctor name -->
                <div class="row col col-md-12">
                  <div class="col col-md-12 form-group">
                    <label class="font-weight-bold" for="customer_doctors_name"
                      >Doctor's Name :</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Doctor's Name"
                      id="customer_doctors_name"
                      name="customer_doctors_name"
                      ng-model="customer_doctors_name"
                      required
                    />
                    <span ng-show = "customerForm.customer_doctors_name.$dirty && customerForm.customer_doctors_name.$invalid">
                    <code
                      class="text-danger small font-weight-bold float-right"
                      id="doctor_name_error"
                      ng-show="customerForm.customer_doctors_name.$error.required"
                    >Doctor's Name is required</code>
                    </span>
                  </div>
                </div>
                <!-- customes's doctor name -->
                <div class="row col col-md-12">
                  <div class="col col-md-12 form-group">
                    <label
                      class="font-weight-bold"
                      for="customer_doctors_address"
                      >Doctor's Address :</label
                    >
                    <textarea
                      class="form-control"
                      placeholder="Doctor's Address"
                      id="customer_doctors_address"
                      name="customer_doctors_address"
                      ng-model="customer_doctors_address"
                      required
                    ></textarea>
                    <span ng-show = "customerForm.customer_doctors_address.$dirty && customerForm.customer_doctors_address.$invalid">
                    <code
                      class="text-danger small font-weight-bold float-right"
                      id="doctor_address_error"
                      ng-show="customerForm.customer_doctors_address.$error.required"
                    >Doctor's Address is required</code>
                    </span>
                  </div>
                </div>
                <!-- customer details content end -->
                <!-- horizontal line -->
                <div class="col col-md-12">
                  <hr
                    class="col-md-12 float-left"
                    style="
                      padding: 0px;
                      width: 95%;
                      border-top: 2px solid #02b6ff;
                    "
                  />
                </div>
                <!-- form submit button -->
                <div class="row col col-md-12">
                  &emsp;
                  <div class="form-group m-auto">
                    <button class="btn btn-primary" type="submit">
                      ADD
                    </button>
                  </div>
                </div>
                <!-- result message -->
                <div
                  id="customer_acknowledgement"
                  class="col-md-12 h5 text-success font-weight-bold text-center"
                  style="font-family: sans-serif"
                ><span ng-show="successMsg">{{ successMsg }}</span></div>
              </div>
            </div>
          </form>
          <hr style="border-top: 2px solid #ff5252" />
        </div>
      </div>
    </div>

    <script>
      var mainApp = angular.module("customerApp", []);
      mainApp.controller("customerController", function ($scope, $http) {
        $scope.successMsg = null;
        $scope.customer_name = "";
        $scope.customer_contact_number = "";
        $scope.customer_address = "";
        $scope.customer_doctors_name = "";
        $scope.customer_doctors_address = "";

        $scope.reset = function () {
          // console.log($scope);
          $scope.customer_name = "";
          $scope.customer_contact_number = "";
          $scope.customer_address = "";
          $scope.customer_doctors_name = "";
          $scope.customer_doctors_address = "";
        };

        $scope.submit = function() {
            // console.log("jgjgjh");
            var customerData = {
                customerName: $scope.customer_name,
                contactNumber: $scope.customer_contact_number,
                address: $scope.customer_address,
                doctorName: $scope.customer_doctors_name,
                doctorAddress: $scope.customer_doctors_address
            }

            console.log(customerData);

            $http({
                url: 'http://localhost:3000/api/customer',
                method: "POST",
                data: customerData
            })
            .then(function(res) {
                $scope.successMsg = 'Saved Successfully';
                console.log(res.data);
            }, 
            function(res) { // optional
                    // failed
                alert('Error: ' + res.message);
            });
        };

        // $scope.reset();
      });
    </script>
  </body>
</html>
